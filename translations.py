TRANSLATIONS = {
    'number_used': {
        'English': "❌ This number is already used",
        'Arabic': "❌ هذا الرقم مستخدم بالفعل",
        'Chinese': "❌ 此号码已被使用"
    },
    'invalid_country_code': {
        'English': "❌ Invalid country code",
        'Arabic': "❌ رمز الدولة غير صالح",
        'Chinese': "❌ 国家代码无效"
    },
    'country_not_supported': {
        'English': "❌ Country not supported",
        'Arabic': "❌ البلد غير مدعوم",
        'Chinese': "❌ 不支持的国家"
    },
    'no_capacity': {
        'English': "❌ No capacity for this country",
        'Arabic': "❌ لا توجد سعة لهذا البلد",
        'Chinese': "❌ 该国家没有容量"
    },
    'otp_prompt': {
        'English': "📲 Please enter the OTP you received on: {phone}\n\nReply with the 6-digit code.\nType /cancel to abort.",
        'Arabic': "📲 يرجى إدخال رمز OTP الذي استلمته على: {phone}\n\nأدخل الرمز المكون من 6 أرقام.\nاكتب /cancel للإلغاء.",
        'Chinese': "📲 请输入你在 {phone} 上收到的OTP验证码\n\n回复6位数字代码。\n输入 /cancel 取消。"
    },
    'no_active_verification': {
        'English': "❌ No active verification",
        'Arabic': "❌ لا يوجد تحقق نشط",
        'Chinese': "❌ 没有正在进行的验证"
    },
    '2fa_prompt': {
        'English': "🔒 Please enter your 2FA password:",
        'Arabic': "🔒 يرجى إدخال كلمة مرور 2FA:",
        'Chinese': "🔒 请输入您的2FA密码："
    },
    'verification_failed': {
        'English': "❌ Verification failed: {reason}",
        'Arabic': "❌ فشل التحقق: {reason}",
        'Chinese': "❌ 验证失败: {reason}"
    },
    '2fa_error': {
        'English': "❌ 2FA Error: {reason}",
        'Arabic': "❌ خطأ في 2FA: {reason}",
        'Chinese': "❌ 2FA 错误: {reason}"
    },
    'number_claimed': {
        'English': "❌ Number already claimed",
        'Arabic': "❌ الرقم تم استلامه بالفعل",
        'Chinese': "❌ 号码已被领取"
    },
    'country_data_missing': {
        'English': "❌ Country data missing",
        'Arabic': "❌ بيانات البلد مفقودة",
        'Chinese': "❌ 缺少国家数据"
    },
    'account_received': {
        'English': "✅ *Account Received*\n\n📞 Number: `{phone}`\n💵 Price: `{price}` USDT\n⏳ Verified automatically after: `{claim_time}` seconds",
        'Arabic': "✅ *تم استلام الحساب*\n\n📞 الرقم: `{phone}`\n💵 السعر: `{price}` USDT\n⏳ سيتم التحقق تلقائيًا بعد: `{claim_time}` ثانية",
        'Chinese': "✅ *账号已接收*\n\n📞 号码: `{phone}`\n💵 价格: `{price}` USDT\n⏳ 将在 `{claim_time}` 秒后自动验证"
    },
    'error_updating_balance': {
        'English': "❌ Error updating your balance. Please contact support.",
        'Arabic': "❌ حدث خطأ أثناء تحديث رصيدك. يرجى التواصل مع الدعم.",
        'Chinese': "❌ 更新余额时出错。请联系支持。"
    },
    'processing_error': {
        'English': "⚠️ Processing error: {error}",
        'Arabic': "⚠️ خطأ في المعالجة: {error}",
        'Chinese': "⚠️ 处理错误: {error}"
    },
    'verification_cancelled': {
        'English': "🛑 *Verification Cancelled*\n\n📞 Number: `{phone}`\n🔄 This number can now be used again\n🗑️ All verification data cleared",
        'Arabic': "🛑 *تم إلغاء التحقق*\n\n📞 الرقم: `{phone}`\n🔄 يمكنك الآن استخدام هذا الرقم مرة أخرى\n🗑️ تم مسح جميع بيانات التحقق",
        'Chinese': "🛑 *验证已取消*\n\n📞 号码: `{phone}`\n🔄 此号码现在可以再次使用\n🗑️ 所有验证数据已清除"
    },
    'help_support': {
        'English': """🆘 Help & Support 🆘\n\nIf you need assistance, please contact our support team:\n👉 @TGVIPRECEIVER\n\nCommon commands:\n/account - View your account information\n/withdraw - Request a withdrawal\n/withdrawhistory - View your withdrawal history\n/cap - View available countries and capacities\n""",
        'Arabic': """🆘 المساعدة والدعم 🆘\n\nإذا كنت بحاجة إلى المساعدة، يرجى التواصل مع فريق الدعم لدينا:\n👉 @TGVIPRECEIVER\n\nالأوامر الشائعة:\n/account - عرض معلومات حسابك\n/withdraw - طلب سحب\n/withdrawhistory - عرض سجل السحب الخاص بك\n/cap - عرض الدول والسعات المتاحة\n""",
        'Chinese': """🆘 帮助与支持 🆘\n\n如果您需要帮助，请联系我们的支持团队：\n👉 @TGVIPRECEIVER\n\n常用命令:\n/account - 查看您的账户信息\n/withdraw - 申请提现\n/withdrawhistory - 查看您的提现历史\n/cap - 查看可用国家和容量\n"""
    },
    'no_pending_verification': {
        'English': "❌ You have no pending phone verification to cancel.",
        'Arabic': "❌ لا يوجد تحقق هاتف معلق لإلغائه.",
        'Chinese': "❌ 您没有待取消的手机验证。"
    },
    'multiple_device_login': {
        'English': "❌ Multiple device login detected. Reporting is not allowed.",
        'Arabic': "❌ تم اكتشاف تسجيل دخول من أجهزة متعددة. لا يمكن الإبلاغ.",
        'Chinese': "❌ 检测到多个设备登录，无法进行举报。"
    },
    'auto_logout_reward': {
        'English': "🎁 *Bonus Reward!*\n\nYou have been rewarded `{bonus}` USDT because accounts were automatically logged out by the bot.\n\n💳 New Balance: `{new_balance}` USDT",
        'Arabic': "🎁 *مكافأة إضافية!*\n\nلقد حصلت على `{bonus}` USDT لأن الحسابات تم تسجيل خروجها تلقائيًا بواسطة البوت.\n\n💳 الرصيد الجديد: `{new_balance}` USDT",
        'Chinese': "🎁 *额外奖励!*\n\n由于机器人自动注销了账户，您获得了 `{bonus}` USDT 奖励。\n\n💳 新余额: `{new_balance}` USDT"
    },
    
    # Withdrawal Messages
    'minimum_withdrawal': {
        'English': "Minimum withdrawal is 1$",
        'Arabic': "الحد الأدنى للسحب هو 1$",
        'Chinese': "最低提现金额为1美元"
    },
    'pending_withdrawal_exists': {
        'English': "You already have a pending withdrawal",
        'Arabic': "لديك طلب سحب معلق بالفعل",
        'Chinese': "您已有待处理的提现申请"
    },
    'withdrawal_prompt': {
        'English': "💳 Please enter your leader card name to proceed with withdrawal (you have 5 minutes):",
        'Arabic': "💳 يرجى إدخال اسم بطاقة القائد للمتابعة في السحب (لديك 5 دقائق):",
        'Chinese': "💳 请输入您的领队卡名称以继续提现（您有5分钟时间）："
    },
    'incorrect_leader_card': {
        'English': "❌ Incorrect leader card. Please ask admin or try again.",
        'Arabic': "❌ بطاقة القائد غير صحيحة. يرجى سؤال المشرف أو المحاولة مرة أخرى.",
        'Chinese': "❌ 领队卡不正确。请联系管理员或重试。"
    },
    'withdrawal_submitted': {
        'English': "✅ Withdrawal request for {balance}$ submitted with leader card: {card_name}. Please wait for admin approval.",
        'Arabic': "✅ تم تقديم طلب السحب بمبلغ {balance}$ باستخدام بطاقة القائد: {card_name}. يرجى انتظار موافقة المشرف.",
        'Chinese': "✅ 提现请求 {balance}$ 已提交，领队卡：{card_name}。请等待管理员批准。"
    },
    'withdrawal_cancelled': {
        'English': "⚠️ Withdrawal process cancelled.",
        'Arabic': "⚠️ تم إلغاء عملية السحب.",
        'Chinese': "⚠️ 提现流程已取消。"
    },
    
    # Verification Messages
    'verification_failed': {
        'English': "❌ *Verification Failed*\n\n📞 Number: {phone_number}\n❌ Reason: Multiple devices detected on this account\n📱 Please try again after logging out from other devices\n\n💡 *Note:* Only single-device logins receive rewards for security.",
        'Arabic': "❌ *فشل التحقق*\n\n📞 الرقم: {phone_number}\n❌ السبب: تم اكتشاف أجهزة متعددة في هذا الحساب\n📱 يرجى المحاولة مرة أخرى بعد تسجيل الخروج من الأجهزة الأخرى\n\n💡 *ملاحظة:* فقط تسجيل الدخول من جهاز واحد يحصل على المكافآت للأمان.",
        'Chinese': "❌ *验证失败*\n\n📞 号码：{phone_number}\n❌ 原因：在此账户上检测到多个设备\n📱 请在从其他设备注销后重试\n\n💡 *注意：* 出于安全考虑，只有单设备登录才能获得奖励。"
    },
    'verification_success': {
        'English': "✅ *Verification Successful*\n\n📞 Number: {phone_number}\n💰 Reward: {reward}$ added to your balance\n📱 Single device confirmed\n\n🎉 Great job! Keep earning!",
        'Arabic': "✅ *نجح التحقق*\n\n📞 الرقم: {phone_number}\n💰 المكافأة: {reward}$ تمت إضافتها إلى رصيدك\n📱 تم تأكيد جهاز واحد\n\n🎉 عمل رائع! استمر في الكسب!",
        'Chinese': "✅ *验证成功*\n\n📞 号码：{phone_number}\n💰 奖励：{reward}$ 已添加到您的余额\n📱 已确认单设备\n\n🎉 做得好！继续赚钱！"
    },
    'multiple_device_warning': {
        'English': "⚠️ *Multiple Device Warning*\n\n📞 Number: {phone_number}\n🚫 {device_count} devices detected\n💰 Reward blocked for security\n\n📱 *To receive rewards:*\n1. Log out from other devices\n2. Use only one device\n3. Try verification again",
        'Arabic': "⚠️ *تحذير من الأجهزة المتعددة*\n\n📞 الرقم: {phone_number}\n🚫 تم اكتشاف {device_count} أجهزة\n💰 تم حظر المكافأة للأمان\n\n📱 *لاستقبال المكافآت:*\n1. سجل الخروج من الأجهزة الأخرى\n2. استخدم جهازاً واحداً فقط\n3. حاول التحقق مرة أخرى",
        'Chinese': "⚠️ *多设备警告*\n\n📞 号码：{phone_number}\n🚫 检测到 {device_count} 个设备\n💰 出于安全考虑奖励被阻止\n\n📱 *要获得奖励：*\n1. 从其他设备注销\n2. 只使用一个设备\n3. 再次尝试验证"
    },
    
    # Start Command Messages
    'language_selection': {
        'English': "Please select your language:\nيرجى اختيار لغتك:\n请选择你的语言:",
        'Arabic': "يرجى اختيار لغتك:\nPlease select your language:\n请选择你的语言:",
        'Chinese': "请选择你的语言:\nPlease select your language:\nيرجى اختيار لغتك:"
    },
    'welcome_message': {
        'English': """🎉 *Welcome to OTP Receiver Bot!* 🎉\n\n✨ *What can you do here?*\n• 📱 Receive SMS codes for verification\n• 💰 Earn money for each successful verification\n• 🌍 Support for many countries\n• 🔄 Auto-claim system\n\n🚀 *Get Started:*\nUse /cun command to get a phone number!\n\n💡 *Need Help?*\nUse /help for assistance\n\n🔍 *Check Status:*\n• /account - Your balance & stats\n• /cap - Available countries\n• /withdrawhistory - Your withdrawals""",
        'Arabic': """🎉 *مرحباً بك في بوت استقبال OTP!* 🎉\n\n✨ *ما يمكنك فعله هنا؟*\n• 📱 استقبال رموز SMS للتحقق\n• 💰 كسب المال لكل تحقق ناجح\n• 🌍 دعم للعديد من البلدان\n• 🔄 نظام الاستلام التلقائي\n\n🚀 *ابدأ الآن:*\nاستخدم الأمر /cun للحصول على رقم هاتف!\n\n💡 *تحتاج مساعدة؟*\nاستخدم /help للمساعدة\n\n🔍 *تحقق من الحالة:*\n• /account - رصيدك والإحصائيات\n• /cap - البلدان المتاحة\n• /withdrawhistory - عمليات السحب الخاصة بك""",
        'Chinese': """🎉 *欢迎使用OTP接收机器人！* 🎉\n\n✨ *您可以在这里做什么？*\n• 📱 接收验证SMS代码\n• 💰 每次成功验证赚钱\n• 🌍 支持多个国家\n• 🔄 自动领取系统\n\n🚀 *开始使用：*\n使用 /cun 命令获取电话号码！\n\n💡 *需要帮助？*\n使用 /help 获取帮助\n\n🔍 *检查状态：*\n• /account - 您的余额和统计\n• /cap - 可用国家\n• /withdrawhistory - 您的提现记录"""
    },
    'language_changed': {
        'English': "✅ Language changed to English",
        'Arabic': "✅ تم تغيير اللغة إلى العربية",
        'Chinese': "✅ 语言已更改为中文"
    },
    
    # Account Messages
    'account_info': {
        'English': """📊 *Account Information*\n\n👤 Name: {name}\n💳 Balance: `{balance}` USDT\n📱 Numbers Used: {sent_accounts}\n📅 Member Since: {registered_date}\n\n💰 *Quick Actions:*\n• /withdraw - Request withdrawal\n• /withdrawhistory - View history\n• /cun - Get new number""",
        'Arabic': """📊 *معلومات الحساب*\n\n👤 الاسم: {name}\n💳 الرصيد: `{balance}` USDT\n📱 الأرقام المستخدمة: {sent_accounts}\n📅 عضو منذ: {registered_date}\n\n💰 *إجراءات سريعة:*\n• /withdraw - طلب سحب\n• /withdrawhistory - عرض السجل\n• /cun - الحصول على رقم جديد""",
        'Chinese': """📊 *账户信息*\n\n👤 姓名: {name}\n💳 余额: `{balance}` USDT\n📱 已用号码: {sent_accounts}\n📅 注册时间: {registered_date}\n\n💰 *快速操作：*\n• /withdraw - 申请提现\n• /withdrawhistory - 查看历史\n• /cun - 获取新号码"""
    },
    
    # System Messages
    'system_error': {
        'English': "❌ System error. Please try again.",
        'Arabic': "❌ خطأ في النظام. يرجى المحاولة مرة أخرى.",
        'Chinese': "❌ 系统错误。请重试。"
    },
    'no_active_sessions': {
        'English': "❌ No active sessions found for {phone}",
        'Arabic': "❌ لم يتم العثور على جلسات نشطة لـ {phone}",
        'Chinese': "❌ 未找到 {phone} 的活动会话"
    },
    'verification_error': {
        'English': "❌ Error starting verification process for {phone}. Please try again.",
        'Arabic': "❌ خطأ في بدء عملية التحقق لـ {phone}. يرجى المحاولة مرة أخرى.",
        'Chinese': "❌ 启动 {phone} 验证过程时出错。请重试。"
    },
    'processing_verification_error': {
        'English': "❌ Error processing verification: {error}",
        'Arabic': "❌ خطأ في معالجة التحقق: {error}",
        'Chinese': "❌ 处理验证时出错：{error}"
    },
    
    # Progress Messages
    'progress_verification': {
        'English': "⏳ Starting verification process...",
        'Arabic': "⏳ بدء عملية التحقق...",
        'Chinese': "⏳ 正在启动验证过程..."
    },
    
    # Success Messages
    'verification_successful': {
        'English': "🎉 Successfully Verified!\n\n📞 Phone: {phone}\n💰 Earnings: {earnings}$\n💳 Balance: {balance}$",
        'Arabic': "🎉 تم التحقق بنجاح!\n\n📞 الهاتف: {phone}\n💰 الأرباح: {earnings}$\n💳 الرصيد: {balance}$",
        'Chinese': "🎉 验证成功！\n\n📞 手机：{phone}\n💰 收益：{earnings}$\n💳 余额：{balance}$"
    },
    'verification_failed_no_reward': {
        'English': "❌ Verification Failed\n\nMultiple devices detected. No reward given.\n🔄 You can try this number again later.",
        'Arabic': "❌ فشل التحقق\n\nتم اكتشاف أجهزة متعددة. لم يتم إعطاء مكافأة.\n🔄 يمكنك تجربة هذا الرقم مرة أخرى لاحقاً.",
        'Chinese': "❌ 验证失败\n\n检测到多个设备。未给予奖励。\n🔄 您可以稍后再次尝试此号码。"
    },
    
    # Admin Messages
    'new_withdrawal_request': {
        'English': "💸 New withdrawal request:\nUser ID: {user_id}\nAmount: {balance}$\nCard: {card_name}\nApprove with /pay {user_id}\nApprove with /paycard {card_name}",
        'Arabic': "💸 طلب سحب جديد:\nمعرف المستخدم: {user_id}\nالمبلغ: {balance}$\nالبطاقة: {card_name}\nالموافقة باستخدام /pay {user_id}\nالموافقة باستخدام /paycard {card_name}",
        'Chinese': "💸 新提现请求：\n用户ID: {user_id}\n金额: {balance}$\n卡：{card_name}\n通过 /pay {user_id} 批准\n通过 /paycard {card_name} 批准"
    },
    
    # Withdrawal History
    'withdrawal_history_title': {
        'English': "📋 *Withdrawal History*",
        'Arabic': "📋 *سجل السحب*",
        'Chinese': "📋 *提现历史*"
    },
    'no_withdrawals': {
        'English': "No withdrawals found.",
        'Arabic': "لم يتم العثور على عمليات سحب.",
        'Chinese': "未找到提现记录。"
    }
}

def get_text(key, lang='English', **kwargs):
    """
    Get translated text for the given key and language.
    
    Args:
        key: The translation key
        lang: The language (English, Arabic, Chinese)
        **kwargs: Format parameters for the text
    
    Returns:
        Formatted translated text
    """
    if key in TRANSLATIONS:
        text = TRANSLATIONS[key].get(lang, TRANSLATIONS[key]['English'])
        if kwargs:
            return text.format(**kwargs)
        return text
    return f"Missing translation: {key}"